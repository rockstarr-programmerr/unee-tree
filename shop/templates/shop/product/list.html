{% extends 'base.html' %}
{% block content %}
{% load static %}
		
		<p class="d-none page-title">Shop</p>

		<section id="list_feature_laptop_ipad" class="feature-area relative">
			<div class="overlay overlay-bg"></div>
			<div class="d-none d-xl-block">
				<div class="san_pham">
					<h2>Sản phẩm</h2>
				</div>
				<div class="d-flex justify-content-around align-items-center">
					<div style="overflow-x:auto;">
						<table class="table_of_category">
							<tr>
								<td {% if not category %} class="active"{% endif %}><a class="san_pham_category" href="{% url 'shop:product_list' %}">Tất cả</a></td>
				        		{% for c in categories %}
				          		<td {% if category.slug == c.slug %} class="active"{% endif %}>
				              		<a class="san_pham_category" href="{{ c.get_absolute_url }}">{{ c.name }}</a>
				          		</td>
				        		{% endfor %}
			        		</tr>
			        	</table>
			        </div>
				</div>
			</div>
			<div class="d-none d-md-block d-xl-none">
				<div class="san_pham">
					<h2 style="font-size: 22px;">Sản phẩm</h2>
				</div>
				<div class="d-flex justify-content-around align-items-center">
					<div style="overflow-x:auto;">
						<table class="table_of_category">
							<tr>
								<td {% if not category %} class="active"{% endif %}><a style="font-size: 14px;" class="san_pham_category" href="{% url 'shop:product_list' %}">Tất cả</a></td>
				        		{% for c in categories %}
				          		<td {% if category.slug == c.slug %} class="active"{% endif %}>
				              		<a style="font-size: 14px;" class="san_pham_category" href="{{ c.get_absolute_url }}">{{ c.name }}</a>
				          		</td>
				        		{% endfor %}
			        		</tr>
			        	</table>
			        </div>
				</div>
			</div>
			<div class="" style="margin: auto 12%;">
				<div class="row">
					<div class="col-3 d-flex flex-column">
						<div>
							{% if category_slug %}
							<form action="{% url 'shop:product_list_by_category' category_slug %}" class="maven_font dark_color_text my-2" style="font-size: 17px;">
								<fieldset class="form-group my-2">
									<h3 class="maven_font dark_color_text">GIÁ:</h3>
									<input {% if price_range is None or price_range == 'on' %} checked {% endif %} class="my-2 radio" type="radio" name="gia"> Tất cả <br>
									<input {% if price_range == '50-200' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="50-200"> 50.000&#x20AB đến 200.000&#x20AB <br>
									<input {% if price_range == '200-1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="200-1000"> 200.000&#x20AB đến 1.000.000&#x20AB <br>
									<input {% if price_range == '1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="1000"> 1.000.000&#x20AB trở lên <br>
								</fieldset>
								<fieldset class="form-group my-2">
									<h3 class="maven_font dark_color_text">CÔNG DỤNG:</h3>
									<input {% if usage_0 == 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_0" value="tat-ca" class="my-2"> Tất cả <br> 
									<input {% if usage_1 == 'trang-tri' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_1" value="trang-tri" class="my-2"> Trang trí <br> 
									<input {% if usage_2 == 'loc-khong-khi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_2" value="loc-khong-khi" class="my-2"> Lọc không khí <br> 
									<input {% if usage_3 == 'chua-benh' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_3" value="chua-benh" class="my-2"> Chữa bệnh <br>
									<input {% if usage_4 == 'gia-vi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_4" value="gia-vi" class="my-2"> Gia vị <br> 
									<input {% if usage_5 == 'phong-thuy' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_5" value="phong-thuy" class="my-2"> Phong thủy <br> 
									<input {% if usage_6 == 'nha-o2' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_6" value="nha-o2" class="my-2"> Nhả O2 ban đêm <br>  
								</fieldset>
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</form>
							{% else %}
							<form action="{% url 'shop:product_list' %}" class="maven_font dark_color_text my-2" style="font-size: 17px;">
								<fieldset class="form-group my-2">
									<h3 class="maven_font dark_color_text">GIÁ:</h3>
									<input {% if price_range is None or price_range == 'on' %} checked {% endif %} class="my-2 radio" type="radio" name="gia"> Tất cả <br>
									<input {% if price_range == '50-200' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="50-200"> 50.000&#x20AB đến 200.000&#x20AB <br>
									<input {% if price_range == '200-1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="200-1000"> 200.000&#x20AB đến 1.000.000&#x20AB <br>
									<input {% if price_range == '1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="1000"> 1.000.000&#x20AB trở lên <br>
								</fieldset>
								<fieldset class="form-group my-2">
									<h3 class="maven_font dark_color_text">CÔNG DỤNG:</h3>
									<input {% if usage_0 == 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_0" value="tat-ca" class="my-2"> Tất cả <br> 
									<input {% if usage_1 == 'trang-tri' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_1" value="trang-tri" class="my-2"> Trang trí <br> 
									<input {% if usage_2 == 'loc-khong-khi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_2" value="loc-khong-khi" class="my-2"> Lọc không khí <br> 
									<input {% if usage_3 == 'chua-benh' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_3" value="chua-benh" class="my-2"> Chữa bệnh <br>
									<input {% if usage_4 == 'gia-vi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_4" value="gia-vi" class="my-2"> Gia vị <br> 
									<input {% if usage_5 == 'phong-thuy' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_5" value="phong-thuy" class="my-2"> Phong thủy <br> 
									<input {% if usage_6 == 'nha-o2' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_6" value="nha-o2" class="my-2"> Nhả O2 ban đêm <br>  
								</fieldset>
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</form>				
							{% endif %}
						</div>
					</div>	
					<div class="col-9 row">
						{% for product in products %}
							<div class="col-6 col-xl-4 align-items-stretch p-0">
								<div class="box_shadow_baby d-flex flex-column m-2 p-2">
									<div class="relative mb-4" onmouseover="{% if product.description %} showDescription({{ forloop.counter0 }}) {% endif %}; showForm({{ forloop.counter0 }})" onmouseleave="hideDescription({{ forloop.counter0 }}); hideForm({{ forloop.counter0 }})">
										<div>
											<a href="{{ product.get_absolute_url }}">
												<img class="d-block relative w-100" src="{% if product.image %} {{ product.image.url }} {% else %} {% static 'img/default.jpg' %} {% endif %}" style="z-index: 600; border: 1px solid #fff; border-radius: 4px;" alt="{{ product.name }}">
											</a>
										</div>
										<!-- Description -->
										<a href="{{ product.get_absolute_url }}">
											<div class="product_desc_box" style="position: absolute; top: 1px; left: 1px; right: 1px; z-index: 20000; opacity: 0; transition: opacity 0.3s; -webkit-transition: opacity 0.3s; cursor: pointer">
												<p>{{ product.description|truncatewords:23 }}</p> 
											</div>
										</a>
										<div class="form_add_cart" style="position: absolute; bottom: 1px; left: 1px; right: 1px; z-index: 20000; opacity: 0; transition: opacity 0.3s; -webkit-transition: opacity 0.3s;">
											<form class="detail-page-text" action="{% url "cart:cart_add" product.id %}" method="post">
								                {% csrf_token %}                                                
								                <input type="hidden" name="quantity" value="1">
								                <input style="width: 100%; font-size: 13px; font-family: 'Maven Pro', sans-serif;" type="submit" value="Thêm vào giỏ" class="genric-btn primary radius">
								            </form>
										</div>
									</div>
									<div class="row" style="min-height: 60px;">
										<div class="col-6 text-center maven_font pr-0">
											<a class="desc_a" style="color: #111; font-size: 18px;" onmouseover="changeTextColorOn({{ forloop.counter0 }})" onmouseleave="changeTextColorOff({{ forloop.counter0 }})" href="{{ product.get_absolute_url }}">{{ product.name }}</a>
										</div>
										<div class="col-6 text-center maven_font px-0">
											<p style="color: red; font-size: 18px;">{{ product.price }} &#x20AB</p>
										</div>
									</div>
								</div>
							</div>
						{% endfor %}					
					</div>
				</div>
				{% if products.paginator.num_pages > 1 %}
				<div class="relative py-4">
					<div class="d-flex flex-row-reverse">
						<div class="px-3"><a href="?page={{ products.paginator.num_pages }}"><i class="paginator fa fa-angle-double-right""></i></a></div>
						<div class="px-3"><a {% if products.has_next %} href="?page={{ products.next_page_number }}" {% else %} href="?page={{ products.paginator.num_pages }}" {% endif %}><i class="paginator fa fa-angle-right"></i></a></div>
						<div class="px-2">
							<div>
							{% for destination_page in paginator.page_range %}
								<div class="px-2 d-inline"><a {% if int_current_page == destination_page %} class="paginator-active" {% else %} class="dark_color_text paginator"  {% endif %} href="?page={{ destination_page }}">{{ destination_page }}</a></div>
							{% endfor %}
							</div>
						</div>
						<div class="px-3"><a {% if products.has_previous %} href="?page={{ products.previous_page_number }}" {% else %} href="?page=1" {% endif %}><i class="paginator fa fa-angle-left"></i></a></div>
						<div class="px-3"><a href="?page=1"><i class="paginator fa fa-angle-double-left"></i></a></div>
					</div>
				</div>
				{% endif %}
			</div>
		</section>
		<section id="list_feature_iphone" class="feature-area relative">
			<div class="overlay overlay-bg"></div>
			<div class="px-4">
				<div class="san_pham">
					<h2 style="font-size: 20px;">Sản phẩm</h2>
				</div>
				<div id="danh_muc_row" class="main-menubar row justify-content-start mt-2">
					<div>
						<h2 style="font-size: 16px;" class="merry_whether_font">Danh mục: </h2>
					</div>
					<div>
						{% if not category %}
							<h2 style="font-size: 16px;" onclick="toggleCategories()" id="on_click_opacity_1" class="san_pham_category">Tất cả</h2>
						{% else %}
							{% for c in categories %}
			          		<h2 style="font-size: 16px;" onclick="toggleCategories()" id="on_click_opacity_2" {% if category.slug == c.slug %} class="san_pham_category" {% else %} class="category_inactive" {% endif %}>{{ c.name }}</h2>
			        		{% endfor %}	
			        	{% endif %}												
					</div>
					<div id="down_arrow_icon_box">
						<img onclick="toggleCategories()" src="{% static 'img/black-arrow.png' %}" alt="arrow">
					</div>
				</div>
				<div id="cac_danh_muc_dropdown">
					{% for c in categories %}
	          			<a style="font-size: 16px;" {% if category.slug == c.slug %} class="category_inactive" {% else %} class="san_pham_category" {% endif %} href="{{ c.get_absolute_url }}">{{ c.name }}</a>
	        		{% endfor %}
					{% if category %}
						<a style="font-size: 16px;" class="san_pham_category" href="{% url 'shop:product_list' %}">Tất cả</a>
					{% endif %}        		
				</div>
				<div id="danh_muc_row" class="main-menubar row justify-content-start">
					<div>
						<h2 style="font-size: 16px;" class="merry_whether_font">Giá: </h2>
					</div>
					<div onclick="toggleFilterByPrice()">
						<i class="fa fa-filter" {% if price_range %} style="color: #6cbb23;" {% else %} style="color: black;" {% endif %}></i>
					</div>
					<div class="mx-3" id="filter_by_price" style="display: none;">
						{% if category_slug %}
						<form action="{% url 'shop:product_list_by_category' category_slug %}" class="maven_font dark_color_text my-2" style="font-size: 14px;">
							<div class="my-2">
								<input {% if price_range is None or price_range == 'on' %} checked {% endif %} class="my-2 radio" type="radio" name="gia"> Tất cả <br>
								<input {% if price_range == '50-200' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="50-200"> 50.000&#x20AB đến 200.000&#x20AB <br>
								<input {% if price_range == '200-1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="200-1000"> 200.000&#x20AB đến 1.000.000&#x20AB <br>
								<input {% if price_range == '1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="1000"> 1.000.000&#x20AB trở lên <br>
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</div>
						</form>
						{% else %}
						<form action="{% url 'shop:product_list' %}" class="maven_font dark_color_text my-2" style="font-size: 14px;">
							<div class="my-2">
								<input {% if price_range is None or price_range == 'on' %} checked {% endif %} class="my-2 radio" type="radio" name="gia"> Tất cả <br>
								<input {% if price_range == '50-200' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="50-200"> 50.000&#x20AB đến 200.000&#x20AB <br>
								<input {% if price_range == '200-1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="200-1000"> 200.000&#x20AB đến 1.000.000&#x20AB <br>
								<input {% if price_range == '1000' %} checked {% endif %} class="my-2 radio" type="radio" name="gia" value="1000"> 1.000.000&#x20AB trở lên <br>
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</div>
						</form>
						{% endif %}
					</div>
				</div>
				<div id="danh_muc_row" class="main-menubar row justify-content-start mb-4">
					<div>
						<h2 style="font-size: 16px;" class="merry_whether_font">Công dụng: </h2>
					</div>
					<div onclick="toggleFilterByUsage()">
						<i class="fa fa-filter" {% if usage_1 or usage_2 or usage_3 or usage_4 or usage_5 or usage_6 %} style="color: #6cbb23;" {% else %} style="color: black;" {% endif %}></i>
					</div>
					<div class="mx-3" id="filter_by_usage" style="display: none;">
						{% if category_slug %}
						<form action="{% url 'shop:product_list_by_category' category_slug %}" class="maven_font dark_color_text my-2" style="font-size: 14px;">
							<div class="my-2">
								<input {% if usage_0 == 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_0" value="tat-ca" class="my-2"> Tất cả <br> 
								<input {% if usage_1 == 'trang-tri' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_1" value="trang-tri" class="my-2"> Trang trí <br> 
								<input {% if usage_2 == 'loc-khong-khi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_2" value="loc-khong-khi" class="my-2"> Lọc không khí <br> 
								<input {% if usage_3 == 'chua-benh' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_3" value="chua-benh" class="my-2"> Chữa bệnh <br>
								<input {% if usage_4 == 'gia-vi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_4" value="gia-vi" class="my-2"> Gia vị <br> 
								<input {% if usage_5 == 'phong-thuy' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_5" value="phong-thuy" class="my-2"> Phong thủy <br> 
								<input {% if usage_6 == 'nha-o2' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_6" value="nha-o2" class="my-2"> Nhả O2 ban đêm <br>  
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</div>
						</form>
						{% else %}
						<form action="{% url 'shop:product_list' %}" class="maven_font dark_color_text my-2 mx-auto" style="font-size: 14px;">
							<div class="my-2">
								<input {% if usage_0 == 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_0" value="tat-ca" class="my-2"> Tất cả <br> 
								<input {% if usage_1 == 'trang-tri' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_1" value="trang-tri" class="my-2"> Trang trí <br> 
								<input {% if usage_2 == 'loc-khong-khi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_2" value="loc-khong-khi" class="my-2"> Lọc không khí <br> 
								<input {% if usage_3 == 'chua-benh' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_3" value="chua-benh" class="my-2"> Chữa bệnh <br>
								<input {% if usage_4 == 'gia-vi' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_4" value="gia-vi" class="my-2"> Gia vị <br> 
								<input {% if usage_5 == 'phong-thuy' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_5" value="phong-thuy" class="my-2"> Phong thủy <br> 
								<input {% if usage_6 == 'nha-o2' and usage_0 != 'tat-ca' %} checked {% endif %} type="checkbox" name="usage_6" value="nha-o2" class="my-2"> Nhả O2 ban đêm <br>  
								<button class="my-2 genric-btn primary radius">Lọc</button>
							</div>
						</form>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="container_new">
				<div class="row align-items-stretch">
					{% for product in products %}
					<div class="col-6 col-sm-4 align-items-stretch p-0">
						<div class="box_shadow_baby d-flex flex-column m-1 p-1">
							<div class="mb-2">
								<a href="{{ product.get_absolute_url }}">
									<img class="d-block relative w-100" src="{% if product.image %} {{ product.image.url }} {% else %} {% static 'img/default.jpg' %} {% endif %}" style="z-index: 600; border: 1px solid #fff; border-radius: 4px;" alt="{{ product.name }}">
								</a>
							</div>
							<div class="w-100 mx-auto row" style="min-height: 40px;">
								<div class="col-6 text-center maven_font py-0">
									<a href="{{ product.get_absolute_url }}"><p class="p-0 m-0" style="color: #111; font-size: 12px; line-height: 16px;">{{ product.name }}</p></a>
								</div>
								<div class="col-6 text-center maven_font p-0">
									<p class="p-0 m-0" style="color: red; font-size: 12px; line-height: 16px;">{{ product.price }} &#x20AB</p>
								</div>
							</div>
						</div>
					</div>
					{% endfor %}					
				</div>
			</div>
			{% if products.paginator.num_pages > 1 %}
			<div class="relative py-3 text-center">
				<div class="px-1 d-inline"><a href="?page=1"><i class="paginator-iphone fa fa-angle-double-left"></i></a></div>
				<div class="px-1 d-inline"><a {% if products.has_previous %} href="?page={{ products.previous_page_number }}" {% else %} href="?page=1" {% endif %}><i class="paginator-iphone fa fa-angle-left"></i></a></div>
				<div class="px-1 d-inline">
				{% for destination_page in paginator.page_range %}
					<div class="px-2 d-inline"><a {% if int_current_page == destination_page %} class="paginator-iphone-active" {% else %} class="dark_color_text paginator-iphone"  {% endif %} href="?page={{ destination_page }}">{{ destination_page }}</a></div>
				{% endfor %}
				</div>
				<div class="px-1 d-inline"><a {% if products.has_next %} href="?page={{ products.next_page_number }}" {% else %} href="?page={{ products.paginator.num_pages }}" {% endif %}><i class="paginator-iphone fa fa-angle-right"></i></a></div>
				<div class="px-1 d-inline"><a href="?page={{ products.paginator.num_pages }}"><i class="paginator-iphone fa fa-angle-double-right""></i></a></div>
			</div>
			{% endif %}
		</section>
{% endblock %}